bind-key -T ktm-cmd MouseDown1Pane       select-pane -t = \; send-keys -M
bind-key -T ktm-cmd MouseDown1Status     select-window -t =
bind-key -T ktm-cmd MouseDown2Pane       select-pane -t = \; if-shell -F "#{||:#{pane_in_mode},#{mouse_any_flag}}" "send -M" "paste -p"
bind-key -T ktm-cmd MouseDown3Pane       if-shell -F -t = "#{||:#{mouse_any_flag},#{&&:#{pane_in_mode},#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}}}" "select-pane -t= ; send -M" "display-menu -t= -xM -yM -T \"#[align=centre]#{pane_index} (#{pane_id})\" \"#{?#{m/r:(copy|view)-mode,#{pane_mode}},Go To Top,}\" < \"send -X history-top\" \"#{?#{m/r:(copy|view)-mode,#{pane_mode}},Go To Bottom,}\" > \"send -X history-bottom\" '' \"#{?mouse_word,Search For #[underscore]#{=/9/...:mouse_word},}\" C-r \"if -F \\\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}\\\" \\\"copy-mode -t=\\\" ; send -Xt= search-backward \\\"#{q:mouse_word}\\\"\" \"#{?mouse_word,Type #[underscore]#{=/9/...:mouse_word},}\" C-y \"copy-mode -q ; send-keys -l -- \\\"#{q:mouse_word}\\\"\" \"#{?mouse_word,Copy #[underscore]#{=/9/...:mouse_word},}\" c \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_word}\\\"\" \"#{?mouse_line,Copy Line,}\" l \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_line}\\\"\" '' \"Horizontal Split\" h \"split-window -h\" \"Vertical Split\" v \"split-window -v\" '' \"#{?#{>:#{window_panes},1},,-}Swap Up\" u \"swap-pane -U\" \"#{?#{>:#{window_panes},1},,-}Swap Down\" d \"swap-pane -D\" \"#{?pane_marked_set,,-}Swap Marked\" s swap-pane '' Kill X kill-pane Respawn R \"respawn-pane -k\" \"#{?pane_marked,Unmark,Mark}\" m \"select-pane -m\" \"#{?#{>:#{window_panes},1},,-}#{?window_zoomed_flag,Unzoom,Zoom}\" z \"resize-pane -Z\""
bind-key -T ktm-cmd MouseDown3Status     display-menu -T "#[align=centre]#{window_index}:#{window_name}" -t = -x W -y W "#{?#{>:#{session_windows},1},,-}Swap Left" l "swap-window -t:-1" "#{?#{>:#{session_windows},1},,-}Swap Right" r "swap-window -t:+1" "#{?pane_marked_set,,-}Swap Marked" s swap-window '' Kill X kill-window Respawn R "respawn-window -k" "#{?pane_marked,Unmark,Mark}" m "select-pane -m" Rename n "command-prompt -I \"#W\" \"rename-window -- '%%'\"" '' "New After" w "new-window -a" "New At End" W new-window
bind-key -T ktm-cmd MouseDown3StatusLeft display-menu -T "#[align=centre]#{session_name}" -t = -x M -y W Next n "switch-client -n" Previous p "switch-client -p" '' Renumber N "move-window -r" Rename n "command-prompt -I \"#S\" \"rename-session -- '%%'\"" '' "New Session" s new-session "New Window" w new-window
bind-key -T ktm-cmd MouseDrag1Pane       if-shell -F "#{||:#{pane_in_mode},#{mouse_any_flag}}" "send -M" "copy-mode -M"
bind-key -T ktm-cmd MouseDrag1Border     resize-pane -M
bind-key -T ktm-cmd WheelUpPane          if-shell -F "#{||:#{pane_in_mode},#{mouse_any_flag}}" "send -M" "copy-mode -e"
bind-key -T ktm-cmd WheelUpStatus        previous-window
bind-key -T ktm-cmd WheelDownStatus      next-window
bind-key -T ktm-cmd DoubleClick1Pane     select-pane -t = \; if-shell -F "#{||:#{pane_in_mode},#{mouse_any_flag}}" "send -M" "copy-mode -H ; send -X select-word ; run -d0.3 ; send -X copy-pipe-and-cancel"
bind-key -T ktm-cmd TripleClick1Pane     select-pane -t = \; if-shell -F "#{||:#{pane_in_mode},#{mouse_any_flag}}" "send -M" "copy-mode -H ; send -X select-line ; run -d0.3 ; send -X copy-pipe-and-cancel"
bind-key -T ktm-cmd M-MouseDown3Pane     display-menu -T "#[align=centre]#{pane_index} (#{pane_id})" -t = -x M -y M "#{?#{m/r:(copy|view)-mode,#{pane_mode}},Go To Top,}" < "send -X history-top" "#{?#{m/r:(copy|view)-mode,#{pane_mode}},Go To Bottom,}" > "send -X history-bottom" '' "#{?mouse_word,Search For #[underscore]#{=/9/...:mouse_word},}" C-r "if -F \"#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}\" \"copy-mode -t=\" ; send -Xt= search-backward \"#{q:mouse_word}\"" "#{?mouse_word,Type #[underscore]#{=/9/...:mouse_word},}" C-y "copy-mode -q ; send-keys -l -- \"#{q:mouse_word}\"" "#{?mouse_word,Copy #[underscore]#{=/9/...:mouse_word},}" c "copy-mode -q ; set-buffer -- \"#{q:mouse_word}\"" "#{?mouse_line,Copy Line,}" l "copy-mode -q ; set-buffer -- \"#{q:mouse_line}\"" '' "Horizontal Split" h "split-window -h" "Vertical Split" v "split-window -v" '' "#{?#{>:#{window_panes},1},,-}Swap Up" u "swap-pane -U" "#{?#{>:#{window_panes},1},,-}Swap Down" d "swap-pane -D" "#{?pane_marked_set,,-}Swap Marked" s swap-pane '' Kill X kill-pane Respawn R "respawn-pane -k" "#{?pane_marked,Unmark,Mark}" m "select-pane -m" "#{?#{>:#{window_panes},1},,-}#{?window_zoomed_flag,Unzoom,Zoom}" z "resize-pane -Z"

bind-key -T root M-m set-option key-table ktm-cmd
bind-key -T ktm-cmd M-m set-option key-table root

bind-key -T ktm-cmd c copy-mode

bind-key -T ktm-cmd y paste-buffer

bind-key -T ktm-cmd : command-prompt

bind-key -T ktm-cmd w switch-client -T ktm-window

bind-key -T ktm-window 0 select-window -t :0
bind-key -T ktm-window 1 select-window -t :1
bind-key -T ktm-window 2 select-window -t :2
bind-key -T ktm-window 3 select-window -t :3
bind-key -T ktm-window 4 select-window -t :4
bind-key -T ktm-window 5 select-window -t :5
bind-key -T ktm-window 6 select-window -t :6
bind-key -T ktm-window 7 select-window -t :7
bind-key -T ktm-window 8 select-window -t :8
bind-key -T ktm-window 9 select-window -t :9
bind-key -T ktm-window t choose-tree -Zw
bind-key -T ktm-window i command-prompt -p index "select-window -t \":%%\""

bind-key -T ktm-window h select-pane -L
bind-key -T ktm-window l select-pane -R
bind-key -T ktm-window k select-pane -U
bind-key -T ktm-window j select-pane -D
bind-key -T ktm-window d kill-pane
bind-key -T ktm-window H select-window -t :-
bind-key -T ktm-window L select-window -t :+
bind-key -T ktm-window D kill-window
bind-key -T ktm-window c new-window
bind-key -T ktm-window o last-window
bind-key -T ktm-window z resize-pane -Z
bind-key -T ktm-window b break-pane
bind-key -T ktm-window n display-panes
bind-key -T ktm-window , command-prompt -I "#W" "rename-window -- \"%%\""

bind-key -T ktm-window w set-option key-table ktm-window-pane
bind-key -T ktm-window s switch-client -T ktm-window-split
bind-key -T ktm-window m switch-client -T ktm-window-move
bind-key -T ktm-window a switch-client -T ktm-window-arrange
bind-key -T ktm-window r set-option key-table ktm-window-resize

bind-key -T ktm-window-pane 0 select-window -t :0
bind-key -T ktm-window-pane 1 select-window -t :1
bind-key -T ktm-window-pane 2 select-window -t :2
bind-key -T ktm-window-pane 3 select-window -t :3
bind-key -T ktm-window-pane 4 select-window -t :4
bind-key -T ktm-window-pane 5 select-window -t :5
bind-key -T ktm-window-pane 6 select-window -t :6
bind-key -T ktm-window-pane 7 select-window -t :7
bind-key -T ktm-window-pane 8 select-window -t :8
bind-key -T ktm-window-pane 9 select-window -t :9
bind-key -T ktm-window-pane t choose-tree -Zw
bind-key -T ktm-window-pane i command-prompt -p index "select-window -t \":%%\""

bind-key -T ktm-window-pane h select-pane -L
bind-key -T ktm-window-pane l select-pane -R
bind-key -T ktm-window-pane k select-pane -U
bind-key -T ktm-window-pane j select-pane -D
bind-key -T ktm-window-pane d kill-pane
bind-key -T ktm-window-pane H select-window -t :-
bind-key -T ktm-window-pane L select-window -t :+
bind-key -T ktm-window-pane D kill-window
bind-key -T ktm-window-pane c new-window
bind-key -T ktm-window-pane o last-window
bind-key -T ktm-window-pane z resize-pane -Z
bind-key -T ktm-window-pane b break-pane
bind-key -T ktm-window-pane n display-panes
bind-key -T ktm-window-pane , command-prompt -I "#W" "rename-window -- \"%%\""

bind-key -T ktm-window-pane s switch-client -T ktm-window-split
bind-key -T ktm-window-pane m switch-client -T ktm-window-move
bind-key -T ktm-window-pane a switch-client -T ktm-window-arrange
bind-key -T ktm-window-pane r set-option key-table ktm-window-resize

bind-key -T ktm-window-pane q set-option key-table ktm-cmd
bind-key -T ktm-window-pane M-m set-option key-table root

bind-key -T ktm-window-split l split-window -h
bind-key -T ktm-window-split j split-window

bind-key -T ktm-window-move k swap-pane -U
bind-key -T ktm-window-move j swap-pane -D

bind-key -T ktm-window-arrange 1 select-layout even-horizontal
bind-key -T ktm-window-arrange 2 select-layout even-vertical
bind-key -T ktm-window-arrange 3 select-layout main-horizontal
bind-key -T ktm-window-arrange 4 select-layout main-vertical

bind-key -T ktm-window-resize h resize-pane -L
bind-key -T ktm-window-resize l resize-pane -R
bind-key -T ktm-window-resize j resize-pane -D
bind-key -T ktm-window-resize k resize-pane -U
bind-key -T ktm-window-resize H resize-pane -L 5
bind-key -T ktm-window-resize L          resize-pane -R 5
bind-key -T ktm-window-resize J resize-pane -D 5
bind-key -T ktm-window-resize K resize-pane -U 5

bind-key -T ktm-window-resize q set-option key-table ktm-cmd
bind-key -T ktm-window-resize M-m set-option key-table root

bind-key -T ktm-cmd s switch-client -T ktm-session

bind-key -T ktm-session d detach-client
bind-key -T ktm-session h switch-client -p
bind-key -T ktm-session l switch-client -n
bind-key -T ktm-session t choose-tree -Zs
bind-key -T ktm-session D kill-session
bind-key -T ktm-session , command-prompt -I "#S" "rename-session \"%%\""

bind-key -T ktm-cmd g switch-client -T ktm-goto

bind-key -T ktm-goto w switch-client -T ktm-goto-window

bind-key -T ktm-goto-window 0 select-window -t :0
bind-key -T ktm-goto-window 1 select-window -t :1
bind-key -T ktm-goto-window 2 select-window -t :2
bind-key -T ktm-goto-window 3 select-window -t :3
bind-key -T ktm-goto-window 4 select-window -t :4
bind-key -T ktm-goto-window 5 select-window -t :5
bind-key -T ktm-goto-window 6 select-window -t :6
bind-key -T ktm-goto-window 7 select-window -t :7
bind-key -T ktm-goto-window 8 select-window -t :8
bind-key -T ktm-goto-window 9 select-window -t :9
bind-key -T ktm-goto-window t choose-tree -Zw
bind-key -T ktm-goto-window i command-prompt -p index "select-window -t \":%%\""
bind-key -T ktm-goto-window h select-window -t :-
bind-key -T ktm-goto-window l select-window -t :+
bind-key -T ktm-goto-window o last-window

bind-key -T ktm-goto s switch-client -T ktm-goto-session

bind-key -T ktm-goto-session h switch-client -p
bind-key -T ktm-goto-session l switch-client -n
bind-key -T ktm-goto-session t choose-tree -Zs
